{"version":3,"file":"changelog.element-227NQt5A.js","sources":["../../../assets/src/elements/changelog.element.ts"],"sourcesContent":["import { html, customElement, css, property, when } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbModalBaseElement } from \"@umbraco-cms/backoffice/modal\";\r\nimport { ClientDrawerChangeLogModalData, ClientDrawerChangeLogModalValue } from \"../tokens/changelog.token\";\r\nimport { ClientDrawerContext, CLIENT_DRAWER_CONTEXT_TOKEN } from \"../contexts/clientdrawer.context\";\r\nimport { DataModel, Change } from \"../api\";\r\n\r\n\r\n@customElement('client-drawer-change-log-modal')\r\nexport class ClientDrawerChangeLogModalElement extends UmbModalBaseElement<ClientDrawerChangeLogModalData, ClientDrawerChangeLogModalValue> {\r\n\r\n    #clientDrawerContext?: ClientDrawerContext;\r\n\r\n    @property({ type: Object })\r\n    drawer?: DataModel;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.consumeContext(CLIENT_DRAWER_CONTEXT_TOKEN, (_instance) => {\r\n            this.#clientDrawerContext = _instance;\r\n\r\n            this.observe(_instance.drawer, (_drawer) => {\r\n                this.drawer = _drawer;\r\n            });\r\n        });\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        super.connectedCallback();\r\n\r\n        if (this.#clientDrawerContext != null) {\r\n            this.#clientDrawerContext.getData();\r\n        }\r\n    }\r\n\r\n    #handleClose() {\r\n        this.modalContext?.reject();\r\n    }\r\n\r\n    render() {\r\n        var simplifiedChangeLogEntries: { date: string | null | undefined; change: Change; }[] = [];\r\n        this.drawer?.changeLog.forEach(function (group) {\r\n            group?.changes?.forEach(function (change) {\r\n                simplifiedChangeLogEntries.push({\r\n                    date: group.formattedDate,\r\n                    change: change\r\n                });\r\n            });\r\n        });\r\n\r\n\r\n        return html`\r\n            <umb-body-layout headline=\"Change log\">\r\n                <uui-table>\r\n                    <uui-table-column style=\"width:20%;\"></uui-table-column>\r\n                    <uui-table-column style=\"\"></uui-table-column>\r\n                    <uui-table-column style=\"\"></uui-table-column>\r\n                    <uui-table-head>\r\n                        <uui-table-head-cell>Date</uui-table-head-cell>\r\n                        <uui-table-head-cell>Changes</uui-table-head-cell>\r\n                        <uui-table-head-cell>Link</uui-table-head-cell>\r\n                    </uui-table-head>\r\n                    ${simplifiedChangeLogEntries.map(\r\n                        (entry: any) => html`\r\n                        ${when(\r\n                            entry,\r\n                            () => html`\r\n                                <uui-table-row>\r\n                                    <uui-table-cell>${entry.date}</uui-table-cell>\r\n                                    <uui-table-cell>${entry.change.text}</uui-table-cell>\r\n                                    <uui-table-cell>\r\n                                        ${entry.change.link\r\n                                            ? html`<a href=\"${entry.change.link}\" target=\"_blank\">${entry.change.link}</a>`\r\n                                            : html`<span>&nbsp;</span>`\r\n                                        }\r\n                                    </uui-table-cell>\r\n                                </uui-table-row>\r\n                            `\r\n                        )}\r\n                    `\r\n                    )}\r\n                </uui-table>\r\n                <div slot=\"actions\">\r\n                    <uui-button id=\"close\" label=\"Close\" @click=\"${this.#handleClose}\" look=\"primary\">Close</uui-button>\r\n                </div>\r\n            </umb-body-layout>\r\n        `;\r\n    }\r\n\r\n    static styles = css`\r\n        uui-table-cell {\r\n            --uui-table-cell-padding: 5px 15px;\r\n        }\r\n    `\r\n}\r\n\r\nexport default ClientDrawerChangeLogModalElement;"],"names":["_clientDrawerContext","_handleClose","handleClose_fn","ClientDrawerChangeLogModalElement","UmbModalBaseElement","__privateAdd","CLIENT_DRAWER_CONTEXT_TOKEN","_instance","__privateSet","_drawer","__privateGet","simplifiedChangeLogEntries","_a","group","change","html","entry","when","__privateMethod","css","__decorateClass","property","customElement","ClientDrawerChangeLogModalElement$1"],"mappings":";;;;;;;;;;;;;;uJAAAA,GAAAC,GAAAC;AAQa,IAAAC,IAAN,cAAgDC,EAAqF;AAAA,EAOxI,cAAc;AACJ,aAmBVC,EAAA,MAAAJ,CAAA,GAzBAI,EAAA,MAAAL,GAAA,MAAA,GAQS,KAAA,eAAeM,GAA6B,CAACC,MAAc;AAC5D,MAAAC,EAAA,MAAKR,GAAuBO,CAAA,GAE5B,KAAK,QAAQA,EAAU,QAAQ,CAACE,MAAY;AACxC,aAAK,SAASA;AAAA,MAAA,CACjB;AAAA,IAAA,CACJ;AAAA,EACL;AAAA,EAEA,oBAA0B;AACtB,UAAM,kBAAkB,GAEpBC,EAAA,MAAKV,MAAwB,QAC7BU,EAAA,MAAKV,GAAqB,QAAQ;AAAA,EAE1C;AAAA,EAMA,SAAS;;AACL,QAAIW,IAAqF,CAAA;AACzF,YAAAC,IAAA,KAAK,WAAL,QAAAA,EAAa,UAAU,QAAQ,SAAUC,GAAO;;AACrC,OAAAD,IAAAC,KAAA,gBAAAA,EAAA,YAAA,QAAAD,EAAS,QAAQ,SAAUE,GAAQ;AACtC,QAAAH,EAA2B,KAAK;AAAA,UAC5B,MAAME,EAAM;AAAA,UACZ,QAAAC;AAAA,QAAA,CACH;AAAA,MAAA;AAAA,IACJ,IAIEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAWOJ,EAA2B;AAAA,MACzB,CAACK,MAAeD;AAAA,0BACdE;AAAA,QACED;AAAA,QACA,MAAMD;AAAA;AAAA,sDAEoBC,EAAM,IAAI;AAAA,sDACVA,EAAM,OAAO,IAAI;AAAA;AAAA,0CAE7BA,EAAM,OAAO,OACTD,aAAgBC,EAAM,OAAO,IAAI,qBAAqBA,EAAM,OAAO,IAAI,SACvED,sBACN;AAAA;AAAA;AAAA;AAAA,MAAA,CAIf;AAAA;AAAA,IAAA,CAEJ;AAAA;AAAA;AAAA,mEAG8CG,QAAKjB,GAAYC,CAAA,CAAA;AAAA;AAAA;AAAA;AAAA,EAIhF;AAOJ;AApFIF,IAAA,oBAAA,QAAA;AAyBAC,IAAA,oBAAA,QAAA;AAAAC,IAAY,WAAG;;AACX,GAAAU,IAAA,KAAK,iBAAL,QAAAA,EAAmB;AACvB;AA7BST,EAiFF,SAASgB;AAAA;AAAA;AAAA;AAAA;AA5EhBC,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAQ;AAAA,GAJjBlB,EAKT,WAAA,UAAA,CAAA;AALSA,IAANiB,EAAA;AAAA,EADNE,EAAc,gCAAgC;AAAA,GAClCnB,CAAA;AAwFb,MAAAoB,IAAepB;"}