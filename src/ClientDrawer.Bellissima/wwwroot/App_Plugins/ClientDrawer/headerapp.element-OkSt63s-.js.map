{"version":3,"file":"headerapp.element-OkSt63s-.js","sources":["../../../assets/src/tokens/drawer.token.ts","../../../assets/src/elements/headerapp.element.ts"],"sourcesContent":["import { UmbModalToken } from \"@umbraco-cms/backoffice/modal\";\r\n\r\nexport interface ClientDrawerModalData {\r\n}\r\n\r\nexport interface ClientDrawerModalValue {\r\n}\r\n\r\nexport const CLIENTDRAWER_MODAL = new UmbModalToken<ClientDrawerModalData, ClientDrawerModalValue>(\r\n    \"clientdrawer.modal\",\r\n    {\r\n        modal: {\r\n            type: 'sidebar',\r\n            size: 'small'\r\n        }\r\n    }\r\n);","import { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\nimport { LitElement, html, css, customElement, property, unsafeHTML } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { CLIENTDRAWER_MODAL } from \"../tokens/drawer.token\";\r\nimport { UMB_MODAL_MANAGER_CONTEXT, UmbModalManagerContext } from \"@umbraco-cms/backoffice/modal\";\r\nimport { ClientDrawerContext, CLIENT_DRAWER_CONTEXT_TOKEN } from \"../contexts/clientdrawer.context\";\r\nimport { HeaderActionModel } from \"../api\";\r\n\r\n@customElement('clientdrawer-headerapp')\r\nexport class ClientDrawerHeaderApp extends UmbElementMixin(LitElement) {\r\n\r\n    #clientDrawerContext?: ClientDrawerContext;\r\n\r\n    @property({ type: Object })\r\n    headerAction?: HeaderActionModel;\r\n\r\n    #modalManagerContext?: UmbModalManagerContext;\r\n\r\n    iconClass: string = '';\r\n    iconImg: string = '';\r\n    iconSvg: string = '';\r\n    clientName: string = '';\r\n    headerButtonMode: string = '';\r\n    currentEnvironmentName: string = '';\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.consumeContext(CLIENT_DRAWER_CONTEXT_TOKEN, (_instance) => {\r\n            this.#clientDrawerContext = _instance;\r\n\r\n            this.observe(_instance.headerAction, (_headerAction) => {\r\n                this.headerAction = _headerAction;\r\n            });\r\n        });\r\n\r\n        this.consumeContext(UMB_MODAL_MANAGER_CONTEXT, (_instance: UmbModalManagerContext | undefined) => {\r\n            this.#modalManagerContext = _instance;\r\n        });\r\n    }\r\n\r\n    connectedCallback(): void {\r\n        super.connectedCallback();\r\n\r\n        if (this.#clientDrawerContext != null) {\r\n            this.#clientDrawerContext.getHeaderActionData();\r\n        }\r\n    }\r\n\r\n    #buttonClick() {\r\n        this.#modalManagerContext?.open(this, CLIENTDRAWER_MODAL);\r\n    }\r\n\r\n    getActionInnerHtml(headerButtonMode: string | undefined, iconHtml: string, currentEnvironmentName: string) {\r\n        switch (headerButtonMode) {\r\n            case 'IconAndEnvironmentName':\r\n                return `<span class=\"umb-badge umb-badge--success umb-badge--m mode--IconAndEnvironmentName\">${iconHtml} ${currentEnvironmentName}</span>`;\r\n            case 'EnvironmentName':\r\n                return `<span class=\"umb-badge umb-badge--success umb-badge--m mode--EnvironmentName\">${currentEnvironmentName}</span>`;\r\n            default:\r\n                return `${iconHtml}`;\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        this.iconClass = this.headerAction?.iconClass ?? '';\r\n        this.iconImg = this.headerAction?.iconImageFilePath ?? '';\r\n        this.iconSvg = this.headerAction?.iconSVG ?? '';\r\n        this.clientName = this.headerAction?.clientName ?? '';\r\n        this.headerButtonMode = this.headerAction?.headerButtonMode ?? 'Icon';\r\n        this.currentEnvironmentName = this.headerAction?.currentEnvironmentName ?? '';\r\n\r\n        let iconHtml = ``;\r\n\r\n        if (this.iconSvg.length > 0) {\r\n            iconHtml = `<uui-icon>${this.iconSvg}</umb-icon>`;\r\n        } else if (this.iconImg?.length > 0) {\r\n            iconHtml = `<img src=\"${this.iconImg}\" alt=\"${this.clientName}\" />`;\r\n        } else if (this.iconClass.length > 0) {\r\n            iconHtml = `<uui-icon icon=\"${this.iconClass}\"></umb-icon>`;\r\n        }\r\n\r\n        //console.log({ 'this.headerAction': this.headerAction, 'iconImg': this.iconImg, 'iconHtml': iconHtml });\r\n\r\n        const innerHtml = this.getActionInnerHtml(this.headerButtonMode, iconHtml, this.currentEnvironmentName);\r\n\r\n        if (this.headerButtonMode === 'Icon') {\r\n            return html`\r\n            <uui-button look=\"primary\" label=\"Client Drawer\" id=\"ClientDrawerHeaderApp\" compact=\"\" pristine=\"\" type=\"button\" color=\"default\" @click=${this.#buttonClick}>\r\n\t\t\t\t${unsafeHTML(innerHtml)}\r\n\t\t\t</uui-button>\r\n            `;\r\n        }\r\n        else {\r\n            return html`\r\n              <button type=\"button\" label=\"Client Drawer\" id=\"ClientDrawerHeaderApp\" @click=${this.#buttonClick}>\r\n                ${unsafeHTML(innerHtml)}\r\n              </button>\r\n            `;\r\n        }\r\n    }\r\n\r\n    static styles = css`\r\n        :host {\r\n            line-height: normal;\r\n        }\r\n        button#ClientDrawerHeaderApp {\r\n            background: 0 0;\r\n            border: none;\r\n            cursor: pointer;\r\n            margin: 0;\r\n            padding: 0;\r\n            max-height: 100%;\r\n            height: 33px;\r\n            display: inline-flex;\r\n            align-items: center;\r\n        }\r\n        button#ClientDrawerHeaderApp:hover {\r\n            opacity: 0.9;\r\n        }\r\n        uui-button#ClientDrawerHeaderApp {\r\n            font-size: 18px;\r\n        }\r\n        uui-button#ClientDrawerHeaderApp img {\r\n            display: inline-block;\r\n            vertical-align: middle;\r\n            width: 1.15em;\r\n            height: auto;\r\n        }\r\n        uui-button#ClientDrawerHeaderApp svg {\r\n            fill: currentColor;\r\n        }\r\n        #ClientDrawerHeaderApp .umb-badge {\r\n            font-weight: 100;\r\n            padding: 4px 15px;\r\n            font-size: 16px;\r\n            background-color: var(--uui-color-positive-emphasis);\r\n            color: #fff;\r\n            align-items: center;\r\n            justify-content: center;\r\n            display: inline-flex;\r\n            border-radius: 100px;\r\n        }\r\n        #ClientDrawerHeaderApp .umb-badge.mode--IconAndEnvironmentName {\r\n            padding: 4px 15px 4px 4px;\r\n        }\r\n        #ClientDrawerHeaderApp .umb-badge img {\r\n            width: 26px;\r\n            margin-right: 6px;\r\n        }\r\n    `\r\n}\r\n\r\n\r\nexport default ClientDrawerHeaderApp;\r\n\r\ndeclare global {\r\n    interface HtmlElementTagNameMap {\r\n        'ClientDrawer-headerapp': ClientDrawerHeaderApp\r\n    }\r\n}"],"names":["CLIENTDRAWER_MODAL","UmbModalToken","_clientDrawerContext","_modalManagerContext","_buttonClick","buttonClick_fn","ClientDrawerHeaderApp","UmbElementMixin","LitElement","__privateAdd","CLIENT_DRAWER_CONTEXT_TOKEN","_instance","__privateSet","_headerAction","UMB_MODAL_MANAGER_CONTEXT","__privateGet","headerButtonMode","iconHtml","currentEnvironmentName","_a","_b","_c","_d","_e","_f","_g","innerHtml","html","__privateMethod","unsafeHTML","css","__decorateClass","property","customElement","ClientDrawerHeaderApp$1"],"mappings":"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"}